<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>i18n-validator Live Demo</title>
  <script src="https://unpkg.com/i18n-validator@latest"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    header {
      text-align: center;
      margin-bottom: 40px;
    }
    h1 {
      color: #0066cc;
      margin-bottom: 10px;
    }
    .subtitle {
      color: #666;
      font-size: 1.2rem;
      margin-bottom: 30px;
    }
    .demo-section {
      background-color: #f9f9f9;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
      margin-bottom: 15px;
    }
    button {
      background-color: #0066cc;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #0052a3;
    }
    .result-card {
      margin-top: 20px;
      padding: 15px;
      border-radius: 4px;
      background-color: white;
      border-left: 4px solid #0066cc;
    }
    .invalid {
      border-left-color: #cc3300;
    }
    .result-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .result-badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 14px;
      font-weight: bold;
    }
    .valid-badge {
      background-color: #e6f7e6;
      color: #2d862d;
    }
    .invalid-badge {
      background-color: #ffe6e6;
      color: #cc3300;
    }
    .result-details {
      margin-top: 15px;
      font-family: monospace;
      font-size: 14px;
      background-color: #f5f5f5;
      padding: 10px;
      border-radius: 4px;
      white-space: pre-wrap;
    }
    .suggestions {
      margin-top: 15px;
    }
    .suggestions span {
      display: inline-block;
      margin-right: 8px;
      margin-bottom: 8px;
      background-color: #e6f0ff;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
    }
    .suggestions span:hover {
      background-color: #cce0ff;
    }
    .footer {
      text-align: center;
      margin-top: 40px;
      color: #666;
      font-size: 14px;
    }
    .loading {
      text-align: center;
      padding: 20px;
      font-style: italic;
      color: #666;
    }
    .configuration {
      margin-bottom: 30px;
    }
    .configuration-title {
      font-weight: bold;
      margin-bottom: 10px;
    }
    .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
    }
    .checkbox-item {
      display: flex;
      align-items: center;
    }
    .checkbox-item input {
      width: auto;
      margin-right: 5px;
      margin-bottom: 0;
    }
  </style>
</head>
<body>
  <header>
    <h1>i18n-validator</h1>
    <div class="subtitle">Modern, Lightweight Validation for i18n Codes</div>
  </header>

  <div class="demo-section">
    <h2>Configuration</h2>
    <p>Select data to load (we'll dynamically load only what you need):</p>
    
    <div class="configuration">
      <div class="configuration-title">Languages:</div>
      <div class="checkbox-group" id="language-options">
        <div class="checkbox-item">
          <input type="checkbox" id="lang-en" value="en" checked>
          <label for="lang-en">English (en)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="lang-es" value="es" checked>
          <label for="lang-es">Spanish (es)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="lang-fr" value="fr" checked>
          <label for="lang-fr">French (fr)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="lang-de" value="de" checked>
          <label for="lang-de">German (de)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="lang-zh" value="zh" checked>
          <label for="lang-zh">Chinese (zh)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="lang-ja" value="ja" checked>
          <label for="lang-ja">Japanese (ja)</label>
        </div>
      </div>

      <div class="configuration-title">Regions:</div>
      <div class="checkbox-group" id="region-options">
        <div class="checkbox-item">
          <input type="checkbox" id="region-US" value="US" checked>
          <label for="region-US">United States (US)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="region-GB" value="GB" checked>
          <label for="region-GB">United Kingdom (GB)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="region-ES" value="ES" checked>
          <label for="region-ES">Spain (ES)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="region-FR" value="FR" checked>
          <label for="region-FR">France (FR)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="region-DE" value="DE" checked>
          <label for="region-DE">Germany (DE)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="region-CN" value="CN" checked>
          <label for="region-CN">China (CN)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="region-JP" value="JP" checked>
          <label for="region-JP">Japan (JP)</label>
        </div>
      </div>

      <div class="configuration-title">Scripts:</div>
      <div class="checkbox-group" id="script-options">
        <div class="checkbox-item">
          <input type="checkbox" id="script-Latn" value="Latn" checked>
          <label for="script-Latn">Latin (Latn)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="script-Hans" value="Hans" checked>
          <label for="script-Hans">Simplified Chinese (Hans)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="script-Hant" value="Hant" checked>
          <label for="script-Hant">Traditional Chinese (Hant)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="script-Jpan" value="Jpan" checked>
          <label for="script-Jpan">Japanese (Jpan)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="script-Cyrl" value="Cyrl" checked>
          <label for="script-Cyrl">Cyrillic (Cyrl)</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="script-Arab" value="Arab" checked>
          <label for="script-Arab">Arabic (Arab)</label>
        </div>
      </div>

      <div class="configuration-title">Predefined Groups:</div>
      <div class="checkbox-group" id="group-options">
        <div class="checkbox-item">
          <input type="checkbox" id="group-common-web" value="common-web">
          <label for="group-common-web">Common Web Languages</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="group-eu" value="eu">
          <label for="group-eu">European Union</label>
        </div>
      </div>

      <button id="configure-button">Configure Validator</button>
    </div>

    <div id="configuration-status" class="loading">Ready to configure...</div>
  </div>

  <div class="demo-section">
    <h2>Validate a BCP 47 language tag</h2>
    <p>Enter a language tag (e.g. "en-US", "zh-Hans-CN") or fuzzy input (e.g. "english", "chinese simplified"):</p>
    
    <div>
      <label for="input-tag">Language Tag or Description:</label>
      <input type="text" id="input-tag" placeholder="e.g. en-US, english usa, zh-Hans" />
      
      <button id="parse-button" disabled>Parse</button>
    </div>
    
    <div id="result-container"></div>
  </div>

  <div class="footer">
    <p><a href="https://github.com/YOUR_USERNAME/i18n-validator" target="_blank">i18n-validator on GitHub</a></p>
    <p>Bundle Size: &lt;5kB gzipped (core) | This demo only loads data you select</p>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const i18nValidator = window.i18nValidator;
      const configureButton = document.getElementById('configure-button');
      const parseButton = document.getElementById('parse-button');
      const inputTag = document.getElementById('input-tag');
      const resultContainer = document.getElementById('result-container');
      const configStatus = document.getElementById('configuration-status');
      
      // Handles configuration
      configureButton.addEventListener('click', async function() {
        configStatus.textContent = 'Configuring validator...';
        configStatus.className = 'loading';
        
        const languages = getSelectedValues('language-options');
        const regions = getSelectedValues('region-options');
        const scripts = getSelectedValues('script-options');
        const groups = getSelectedValues('group-options');
        
        try {
          await i18nValidator.configure({
            languages,
            regions,
            scripts,
            groups
          });
          
          parseButton.disabled = false;
          configStatus.textContent = 'Validator configured successfully!';
          configStatus.className = 'result-card';
          
          const loadedItems = [];
          if (languages.length) loadedItems.push(`${languages.length} languages`);
          if (regions.length) loadedItems.push(`${regions.length} regions`);
          if (scripts.length) loadedItems.push(`${scripts.length} scripts`);
          if (groups.length) loadedItems.push(`${groups.length} groups`);
          
          if (loadedItems.length) {
            configStatus.textContent += ` Loaded: ${loadedItems.join(', ')}`;
          }
        } catch (error) {
          configStatus.textContent = `Error configuring validator: ${error.message}`;
          configStatus.className = 'result-card invalid';
        }
      });
      
      // Handles parse button click
      parseButton.addEventListener('click', function() {
        parseInput();
      });
      
      // Also parse on Enter key
      inputTag.addEventListener('keyup', function(event) {
        if (event.key === 'Enter' && !parseButton.disabled) {
          parseInput();
        }
      });
      
      function parseInput() {
        const input = inputTag.value.trim();
        if (!input) return;
        
        try {
          const result = i18nValidator.parse(input);
          displayResult(result);
        } catch (error) {
          displayError(error);
        }
      }
      
      function displayResult(result) {
        const resultCard = document.createElement('div');
        resultCard.className = `result-card ${result.isValid ? '' : 'invalid'}`;
        
        // Create header with status badge
        const header = document.createElement('div');
        header.className = 'result-header';
        
        const title = document.createElement('h3');
        title.textContent = result.isValid 
          ? `Valid: ${result.normalized}` 
          : 'Invalid Input';
        
        const badge = document.createElement('span');
        badge.className = `result-badge ${result.isValid ? 'valid-badge' : 'invalid-badge'}`;
        badge.textContent = result.isValid ? 'VALID' : 'INVALID';
        
        header.appendChild(title);
        header.appendChild(badge);
        resultCard.appendChild(header);
        
        // Add help text if available
        if (result.helpText) {
          const helpText = document.createElement('p');
          helpText.textContent = result.helpText;
          resultCard.appendChild(helpText);
        }
        
        // Add details section
        if (result.details) {
          const detailsTitle = document.createElement('div');
          detailsTitle.textContent = 'Components:';
          detailsTitle.style.fontWeight = 'bold';
          resultCard.appendChild(detailsTitle);
          
          const details = document.createElement('div');
          details.className = 'result-details';
          
          const componentsText = [];
          
          if (result.details.language) {
            const lang = result.details.language;
            componentsText.push(`Language: ${lang.code}${lang.name ? ` (${lang.name})` : ''} - Valid: ${lang.valid}`);
          }
          
          if (result.details.script) {
            const script = result.details.script;
            componentsText.push(`Script: ${script.code}${script.name ? ` (${script.name})` : ''} - Valid: ${script.valid}`);
          }
          
          if (result.details.region) {
            const region = result.details.region;
            componentsText.push(`Region: ${region.code}${region.name ? ` (${region.name})` : ''} - Valid: ${region.valid}`);
          }
          
          details.textContent = componentsText.join('\n');
          resultCard.appendChild(details);
        }
        
        // Add suggestions if available
        if (result.suggestions && result.suggestions.length > 0) {
          const suggestionsTitle = document.createElement('div');
          suggestionsTitle.textContent = 'Suggestions:';
          suggestionsTitle.style.fontWeight = 'bold';
          resultCard.appendChild(suggestionsTitle);
          
          const suggestions = document.createElement('div');
          suggestions.className = 'suggestions';
          
          result.suggestions.forEach(suggestion => {
            const suggestionSpan = document.createElement('span');
            suggestionSpan.textContent = suggestion;
            suggestionSpan.addEventListener('click', () => {
              inputTag.value = suggestion;
              parseInput();
            });
            suggestions.appendChild(suggestionSpan);
          });
          
          resultCard.appendChild(suggestions);
        }
        
        // Add to container
        resultContainer.innerHTML = '';
        resultContainer.appendChild(resultCard);
      }
      
      function displayError(error) {
        const errorCard = document.createElement('div');
        errorCard.className = 'result-card invalid';
        
        const header = document.createElement('div');
        header.className = 'result-header';
        
        const title = document.createElement('h3');
        title.textContent = 'Error';
        
        const badge = document.createElement('span');
        badge.className = 'result-badge invalid-badge';
        badge.textContent = 'ERROR';
        
        header.appendChild(title);
        header.appendChild(badge);
        errorCard.appendChild(header);
        
        const errorMessage = document.createElement('p');
        errorMessage.textContent = error.message;
        errorCard.appendChild(errorMessage);
        
        resultContainer.innerHTML = '';
        resultContainer.appendChild(errorCard);
      }
      
      function getSelectedValues(containerId) {
        const container = document.getElementById(containerId);
        const checkboxes = container.querySelectorAll('input[type="checkbox"]:checked');
        return Array.from(checkboxes).map(cb => cb.value);
      }
    });
  </script>
</body>
</html> 